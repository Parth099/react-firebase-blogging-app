(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{1662:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit-post/[blogID]",function(){return t(4838)}])},1216:function(n,e,t){"use strict";t.d(e,{Fs:function(){return o},l2:function(){return u},tO:function(){return s}});var r=t(5503),a=t(6257),i=t(1153),u=(0,r.ZF)({apiKey:"AIzaSyCTAWf19XUtFxaylypBNQQiKJMle-IS9fo",authDomain:"react-firebase-blogging-app.firebaseapp.com",projectId:"react-firebase-blogging-app",storageBucket:"react-firebase-blogging-app.appspot.com",messagingSenderId:"1046778962501",appId:"1:1046778962501:web:ff60eeaad6872c5605b92c"}),o=(0,a.ad)(u),s=(0,i.cF)(u)},2557:function(n,e,t){"use strict";t.d(e,{Z:function(){return a}});var r=t(5893);t(7294);function a(n){return(0,r.jsx)("div",{className:"overlay",children:(0,r.jsxs)("div",{className:"w-176 bg-sp4 px-8 py-8 rounded-lg shadow-lg text-white",children:[(0,r.jsxs)("p",{className:"text-2xl",children:[(0,r.jsx)("span",{className:"header-font inline text-sp1",children:"Discard"})," this post?"]}),(0,r.jsxs)("div",{className:"flex mt-8 text-xl gap-4",children:[(0,r.jsx)("button",{className:"model-selection",onClick:function(){n.closeModal()},children:"No"}),(0,r.jsx)("button",{className:"model-selection",onClick:function(){n.confirmAction()},children:"Yes"})]})]})})}},6416:function(n,e,t){"use strict";t.d(e,{Z:function(){return a}});var r=t(5893);t(7294);function a(n){return(0,r.jsxs)(r.Fragment,{children:[n.displaySpinner&&(0,r.jsx)("div",{className:"spinner-container flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"lds-dual-ring"})}),!n.displaySpinner&&n.children]})}},9915:function(n,e,t){"use strict";t.d(e,{Z:function(){return s}});var r=t(943);var a=t(3375);var i=t(1566);function u(n){return function(n){if(Array.isArray(n))return(0,r.Z)(n)}(n)||(0,a.Z)(n)||(0,i.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=t(5893);t(7294);function s(n){var e=function(n){var e=n.target.previousSibling;e&&e.textContent&&r(e.textContent)},t=function(e){n.tags.findIndex((function(n){return n===e}))>=0||n.setTags((function(n){return u(n).concat([e])}))},r=function(e){var t=u(n.tags),r=t.findIndex((function(n){return n===e}));r<0||(t.splice(r,1),n.setTags(t))};return(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"text",id:n.id,className:"input-field w-full",placeholder:"Type in tag names and hit enter",onKeyDown:function(n){if("Enter"===n.key){var e=n.target,r=e.value;r&&(e.value="",t(r))}}}),(0,o.jsx)("div",{className:"tags-collection mt-2",children:n.tags.map((function(n){return(0,o.jsxs)("p",{className:"tag-element",children:[n,(0,o.jsx)("span",{className:"ml-1 cursor-pointer",onClick:e,children:"\u2716"})]},n)}))})]})}},6288:function(n,e,t){"use strict";t.d(e,{H:function(){return c},a:function(){return s}});var r=t(5893),a=t(7294),i=t(1216),u=t(7702),o=(0,a.createContext)(null),s=function(){return(0,a.useContext)(o)};function c(n){var e=n.children,t=(0,u.v0)(i.l2),s=(0,a.useState)(null),c=s[0],l=s[1],f=(0,a.useState)(!1),d=f[0],p=f[1];(0,a.useEffect)((function(){return(0,u.Aj)(t,(function(n){l(n),p(!0)}))}),[]);var m={currentUser:c,signIn:function(n,e){return(0,u.e5)(t,n,e)},createAccount:function(n,e){return(0,u.Xb)(t,n,e)},logOut:function(){return(0,u.w7)(t)},firstLoadCompleted:d};return(0,r.jsx)(o.Provider,{value:m,children:e})}},9586:function(n,e,t){"use strict";function r(n,e,t,r,a,i,u){try{var o=n[i](u),s=o.value}catch(c){return void t(c)}o.done?e(s):Promise.resolve(s).then(r,a)}function a(n){return function(){var e=this,t=arguments;return new Promise((function(a,i){var u=n.apply(e,t);function o(n){r(u,a,i,o,s,"next",n)}function s(n){r(u,a,i,o,s,"throw",n)}o(void 0)}))}}t.d(e,{X:function(){return S},y:function(){return C}});var i,u=t(4924),o=t(4051),s=t.n(o),c=t(5893),l=t(6257),f=t(1153),d=t(7294),p=t(1216),m=t(6288),v=new Uint8Array(16);function h(){if(!i&&!(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(v)}var g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var x=function(n){return"string"===typeof n&&g.test(n)},b=[],y=0;y<256;++y)b.push((y+256).toString(16).substr(1));var w=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(b[n[e+0]]+b[n[e+1]]+b[n[e+2]]+b[n[e+3]]+"-"+b[n[e+4]]+b[n[e+5]]+"-"+b[n[e+6]]+b[n[e+7]]+"-"+b[n[e+8]]+b[n[e+9]]+"-"+b[n[e+10]]+b[n[e+11]]+b[n[e+12]]+b[n[e+13]]+b[n[e+14]]+b[n[e+15]]).toLowerCase();if(!x(t))throw TypeError("Stringified UUID is invalid");return t};var j=function(n,e,t){var r=(n=n||{}).random||(n.rng||h)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var a=0;a<16;++a)e[t+a]=r[a];return e}return w(r)},N=(0,d.createContext)(null),C=function(){return(0,d.useContext)(N)};function S(n){var e=n.children,t=(0,m.a)(),r=(0,d.useState)(null),i=r[0],o=r[1],v=function(){var n=a(s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.QT)(e);case 2:return t=n.sent,n.abrupt("return",!!t.exists()&&t.data());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),h=function(){var n=a(s().mark((function n(e){var t,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,f.iH)(p.tO,e),n.next=3,(0,f.Jt)(t);case 3:return r=n.sent,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),g=function(){var n=a(s().mark((function n(e,t,r){var a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=(0,l.JU)(p.Fs,"main:profiles/".concat(e)),n.next=3,v(a);case 3:if(n.sent){n.next=6;break}return n.abrupt("return",!1);case 6:return n.next=8,(0,l.r7)(a,(0,u.Z)({},t,r));case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),x=function(){var n=a(s().mark((function n(e){var t,r,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,l.hJ)(p.Fs,"main:profiles"),r=(0,l.IO)(t,(0,l.ar)("username","==",e)),n.next=4,(0,l.PL)(r);case 4:return a=n.sent,n.abrupt("return",0===a.size);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b=function(){var n=a(s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,l.JU)(p.Fs,"main:blogs",e),n.next=3,v(t);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),y=function(){var n=a(s().mark((function n(e,t){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,l.JU)(p.Fs,"main:blogs",e),n.next=3,(0,l.r7)(r,t);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();(0,d.useEffect)((function(){if((null===t||void 0===t?void 0:t.currentUser)&&t.currentUser.email){var n=t.currentUser.email,e=(0,l.JU)(p.Fs,"main:profiles/".concat(n));v(e).then((function(t){t||(0,l.pl)(e,{email:n,dateCreated:new Date,username:"",profilePictureName:"default_pfp.jpg",uuid:j()})}))}}),[t]),(0,d.useEffect)((function(){if(null===t||void 0===t?void 0:t.currentUser){var n=t.currentUser.email;return(0,l.cf)((0,l.JU)(p.Fs,"main:profiles/".concat(n)),(function(n){var e=n.data();if(e){var t={email:e.email,username:e.username,profilePictureName:e.profilePictureName,dateCreated:e.dateCreated,uuid:e.uuid};o(t)}}))}}),[t]);var w={profileData:i,getImageUrlFromStorage:h,updatePfp:function(n,e){var t=(0,f.iH)(p.tO,"".concat(e));return(0,f.KV)(t,n)},sendProfileDocUpdate:g,isUsernameAreadyUsed:x,blogsRef:(0,l.hJ)(p.Fs,"main:blogs"),getDocDataById:b,updateDocumentById:y};return(0,c.jsx)(N.Provider,{value:w,children:e})}},7653:function(n,e,t){"use strict";var r=t(7294);e.Z=function(){var n=(0,r.useState)(!1),e=n[0],t=n[1];return[e,function(){return t(!0)},function(){return t(!1)}]}},4838:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return d}});var r=t(828),a=t(5893),i=t(1163),u=t(7294),o=t(2557),s=t(6416),c=t(9915),l=t(9586),f=t(7653);function d(){var n=(0,i.useRouter)(),e=n.query.blogID,t=(0,l.y)(),d=(0,u.useState)(null),p=d[0],m=d[1],v=(0,u.useState)([]),h=v[0],g=v[1];(0,u.useEffect)((function(){(null===t||void 0===t?void 0:t.getDocDataById)&&"undefined"!==e&&t.getDocDataById(e).then((function(n){n&&(m(n),g(n.blogTags))}))}),[t]);var x=(0,u.useRef)(null),b=(0,r.Z)((0,f.Z)(),3),y=b[0],w=b[1],j=b[2],N=function(e){n.push(e)};return(0,a.jsx)("div",{className:"create-blog flex justify-center",children:(0,a.jsxs)("section",{className:"w-288",children:[(0,a.jsx)("div",{className:"p-5 mt-5 bg-sp4 rounded-sm shadow-lg flex flex-col",children:(0,a.jsx)(s.Z,{displaySpinner:!p,children:p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h2",{className:"border-b-sp1 border-b-2 pb-2 my-5 text-white text-3xl",children:[(0,a.jsx)("p",{className:"text-sp1 header-font inline",children:"Edit Blog Post:"}),(0,a.jsxs)("p",{className:"font-bold inline text-2xl",children:[" ",p.title]})]}),(0,a.jsx)("label",{htmlFor:"blog-content",className:"std-label mb-2",children:"Blog Content"}),(0,a.jsx)("textarea",{id:"blog-content",className:"input-field whitespace-pre-wrap",rows:6,ref:x,defaultValue:p.content}),(0,a.jsx)("label",{htmlFor:"blog-tags",className:"std-label mb-2 mt-3",children:"Tags"}),(0,a.jsx)(c.Z,{id:"blog-tags",tags:h,setTags:g})]})})}),(0,a.jsxs)("div",{className:"btn-container flex flex-row-reverse gap-2",children:[(0,a.jsx)("button",{className:"px-6 py-2 bg-sp1 mt-2 rounded-sm font-bold hover:bg-yellow-500",onClick:function(){var n,r=null===(n=x.current)||void 0===n?void 0:n.value;r&&e&&t.updateDocumentById(e,{content:r,blogTags:h}).then((function(){return N("/profile")}))},children:"Submit Edits"}),(0,a.jsx)("button",{className:"px-6 py-2 bg-red-600 mt-2 rounded-sm font-bold hover:bg-red-500",onClick:w,children:"Cancel"}),y&&(0,a.jsx)(o.Z,{closeModal:j,confirmAction:function(){N("/profile")}})]})]})})}},1163:function(n,e,t){n.exports=t(387)},943:function(n,e,t){"use strict";function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}t.d(e,{Z:function(){return r}})},3375:function(n,e,t){"use strict";function r(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}t.d(e,{Z:function(){return r}})},828:function(n,e,t){"use strict";t.d(e,{Z:function(){return i}});var r=t(3375);var a=t(1566);function i(n,e){return function(n){if(Array.isArray(n))return n}(n)||(0,r.Z)(n,e)||(0,a.Z)(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1566:function(n,e,t){"use strict";t.d(e,{Z:function(){return a}});var r=t(943);function a(n,e){if(n){if("string"===typeof n)return(0,r.Z)(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?(0,r.Z)(n,e):void 0}}}},function(n){n.O(0,[16,440,921,774,888,179],(function(){return e=1662,n(n.s=e);var e}));var e=n.O();_N_E=e}]);